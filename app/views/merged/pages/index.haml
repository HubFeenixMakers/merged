- content_for( :merged_menu ) do
  .text-xl.font-bold.text-gray-900
    All Pages

= render "layouts/merged_header"
.overflow-hidden.overflow-x-auto.rounded-lg.border.border-gray-200.m-20
  %table.min-w-full.divide-y.divide-gray-200.text-sm
    %thead.bg-gray-100
      %tr
        %th.whitespace-nowrap.px-4.py-2.text-left.font-medium.text-gray-900
          .flex.items-center.gap-2
            Index
        %th.whitespace-nowrap.px-4.py-2.text-left.font-medium.text-gray-900
          .flex.items-center.gap-2
            Name
        %th.whitespace-nowrap.px-4.py-2.text-left.font-medium.text-gray-900
          .flex.items-center.gap-2
            Sections
        %th.whitespace-nowrap.px-4.py-2.text-left.font-medium.text-gray-900
          .flex.items-center.gap-2
            Updated
        %th.whitespace-nowrap.px-4.py-2.text-left.font-medium.text-gray-900
          .flex.items-center.gap-2
            Edited by
        %th.whitespace-nowrap.px-4.py-2.text-left.font-medium.text-gray-900
          .flex.items-center.gap-2
            Sections at
        %th.whitespace-nowrap.px-4.py-2.text-left.font-medium.text-gray-900
          .flex.items-center.gap-2
            Sections by
        %th.whitespace-nowrap.px-4.py-2.text-left.font-medium.text-gray-900
          .flex.items-center.gap-2
          Actions
    %tbody.divide-y.divide-gray-200
      - @pages.each do |page|
        %tr{id: page.name}
          %td.whitespace-nowrap.px-4.py-2.text-gray-700
            = link_to page.id , merged.page_path(page.id)
          %td.whitespace-nowrap.px-4.py-2.text-gray-700
            = link_to page.name , merged.page_sections_path(page.id)
          %td.whitespace-nowrap.px-4.py-2.text-gray-700
            = page.sections.length
          %td.whitespace-nowrap.px-4.py-2.text-gray-700
            = distance_of_time_in_words_to_now(page.updated_at)
          %td.whitespace-nowrap.px-4.py-2.text-gray-700
            =page.updated_by
            - s = page.section_update
          %td.whitespace-nowrap.px-4.py-2.text-gray-700
            =s.updated_at.to_date
          %td.whitespace-nowrap.px-4.py-2.text-gray-700
            =s.updated_by
          %td.whitespace-nowrap.px-4.py-2
            %strong.rounded.bg-green-100.px-3.text-xs.font-medium.text-green-700{:class => "py-1.5"}
              = link_to 'Sections', merged.page_sections_path(page.id)
            %strong.rounded.bg-amber-100.px-3.text-xs.font-medium.text-amber-700{:class => "py-1.5"}
              = link_to 'Edit', merged.page_path(page.id)

.grid.grid-cols-3.gap-2.m-8.new_page
  .relative.block.border.border-gray-100
    = form_tag( merged.pages_path , {method: :post  } ) do
      %label.block
        %h4.text-lg.font-bold Name
        = text_field_tag( :name , params[:name], class: "block w-full rounded-lg border-gray-200 p-4 pr-12 text-sm shadow-sm")
      =submit_button( "New Page")
